"use strict";function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Scrambler=function(t){var e,r=function(t){var e=t||1,r=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,e);if(" \t\n\r\v".indexOf(r)<0)return r},n=!!(e=t)&&e.constructor===Object||"object"==_typeof(t);n&&(t.target=void 0!==t.target&&n?t.target:"[data-scrambler]",t.random=void 0!==t.random&&n?t.random:[1e3,3e3],t.speed=void 0!==t.speed&&n?t.speed:100,t.text=!(void 0===t.text||!n)&&t.text);var o=function(){return n?t.random[0]+(Math.random()*(1-t.random[1])+t.random[1]):-2999*Math.random()+3e3+1e3};!function(t){_toConsumableArray(n?document.querySelectorAll(t.target):document.querySelectorAll(t)).forEach(function(e,n){if("true"!==e.getAttribute("data-scramble-active")){e.setAttribute("data-scramble-active","true");var a=e.textContent.split(""),i=e.innerHTML,u=a,c=e.textContent.split(""),l=[],f=t.speed?t.speed:100,s=!1,d=function(t){var n=t||e.textContent;a=n.split(""),c=n.split(""),u=[],a.forEach(function(t,e){" \t\n\r\v".indexOf(a[e])>-1?u.push(" "):u.push(r())}),u=u};t.text&&""!==t.text&&("string"==typeof t.text||_instanceof(t.text,String))?(d(t.text),s=!0):e.getAttribute("data-scramble-text")&&""!==e.getAttribute("data-scramble-text")&&(d(e.getAttribute("data-scramble-text")),s=!0);var m=setInterval(function(){if(u.map(function(t,n){" \t\n\r\v".indexOf(t)>-1||(c[n]=r(),setTimeout(function(){l[n]=!0},o()),!0===l[n]&&(c[n]=a[n]),e.textContent=c.join(""))}),c.length==a.length&&c.every(function(t,e){return t===a[e]})){if(e.innerHTML=i,s){var t=e.children[0];t&&""!==t?t.textContent=c.join(""):e.textContent=c.join("")}clearInterval(m),e.setAttribute("data-scramble-active","false")}},f)}})}(t)};"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=Scrambler);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmFtYmxlLUVTNS5qcyJdLCJuYW1lcyI6WyJfaW5zdGFuY2VvZiIsImxlZnQiLCJyaWdodCIsIlN5bWJvbCIsImhhc0luc3RhbmNlIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiX2FycmF5V2l0aG91dEhvbGVzIiwiX2l0ZXJhYmxlVG9BcnJheSIsIl9ub25JdGVyYWJsZVNwcmVhZCIsIlR5cGVFcnJvciIsIml0ZXIiLCJpdGVyYXRvciIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIkFycmF5IiwiZnJvbSIsImlzQXJyYXkiLCJpIiwiYXJyMiIsImxlbmd0aCIsIl90eXBlb2YiLCJvYmoiLCJjb25zdHJ1Y3RvciIsIlNjcmFtYmxlciIsInNjcmFtYmxlQXJncyIsImEiLCJyYW5kb21DaGFyIiwibCIsInIiLCJNYXRoIiwicmFuZG9tIiwicmVwbGFjZSIsInN1YnN0ciIsImluZGV4T2YiLCJwYXNzZWRBc09iamVjdCIsInRhcmdldCIsInNwZWVkIiwidGV4dCIsInJhbmRvbVRpbWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbWVudCIsIndoaWNoIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwidHJ1dGgiLCJ0ZXh0Q29udGVudCIsInNwbGl0IiwidHJ1dGhIVE1MIiwiaW5uZXJIVE1MIiwic3RhcnRUZXh0IiwibmV3TGV0dGVycyIsInJldmVydCIsIkhUTUxyZXNldCIsImRlZmluZUVuZFRleHQiLCJlbmQiLCJlbmRUZXh0IiwiaXRlbSIsImluZGV4IiwicHVzaCIsIlN0cmluZyIsInRpY2tlciIsInNldEludGVydmFsIiwibWFwIiwibGV0dGVyIiwic2V0VGltZW91dCIsImpvaW4iLCJldmVyeSIsImUiLCJpbm5lckNvbnRlbnQiLCJjaGlsZHJlbiIsImNsZWFySW50ZXJ2YWwiLCJzY3JhbWJsZUZpcmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFB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WUEsR0FJVjNCLEVBQWFhLE1BQThCLEtBQXRCYixFQUFhYSxPQUE2QyxpQkFBdEJiLEVBQWFhLE1BQXFCeEMsWUFBWTJCLEVBQWFhLEtBQU13QixVQUM1SE4sRUFBYy9CLEVBQWFhLE1BQzNCaUIsR0FBWSxHQUNIWixFQUFRRSxhQUFhLHVCQUF3RSxLQUEvQ0YsRUFBUUUsYUFBYSx3QkFDNUVXLEVBQWNiLEVBQVFFLGFBQWEsdUJBQ25DVSxHQUFZLEdBR2QsSUFBSVEsRUFBU0MsWUFBWSxXQXlCdkIsR0F2QkFaLEVBQVVhLElBQUksU0FBVUMsRUFBUWhELEdBRTFCLFlBQVlnQixRQUFRZ0MsSUFBVyxJQUVuQ2IsRUFBV25DLEdBQUtTLElBRWhCd0MsV0FBVyxXQUNUYixFQUFPcEMsSUFBSyxHQUNYcUIsTUFFZSxJQUFkZSxFQUFPcEMsS0FDVG1DLEVBQVduQyxHQUFLNkIsRUFBTTdCLElBS3hCeUIsRUFBUUssWUFBY0ssRUFBV2UsS0FBSyxPQUd4QmYsRUFBV2pDLFFBQVUyQixFQUFNM0IsUUFBVWlDLEVBQVdnQixNQUFNLFNBQVVDLEVBQUdwRCxHQUNqRixPQUFPb0QsSUFBTXZCLEVBQU03QixLQUdOLENBR2IsR0FGQXlCLEVBQVFRLFVBQVlELEVBRWhCSyxFQUFXLENBQ2IsSUFBSWdCLEVBQWU1QixFQUFRNkIsU0FBUyxHQUVoQ0QsR0FBaUMsS0FBakJBLEVBQ2xCQSxFQUFhdkIsWUFBY0ssRUFBV2UsS0FBSyxJQUUzQ3pCLEVBQVFLLFlBQWNLLEVBQVdlLEtBQUssSUFJMUNLLGNBQWNWLEdBRWRwQixFQUFRRyxhQUFhLHVCQUF3QixXQUk5Q1QsTUFzQ1RxQyxDQUFhakQsSUFLSyxvQkFBWGtELGFBQW9ELElBQW5CQSxPQUFPQyxVQUNqREQsT0FBT0MsUUFBVXBEIiwiZmlsZSI6InNjcmFtYmxlLUVTNS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmZ1bmN0aW9uIF9pbnN0YW5jZW9mKGxlZnQsIHJpZ2h0KSB7IGlmIChyaWdodCAhPSBudWxsICYmIHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgcmlnaHRbU3ltYm9sLmhhc0luc3RhbmNlXSkgeyByZXR1cm4gcmlnaHRbU3ltYm9sLmhhc0luc3RhbmNlXShsZWZ0KTsgfSBlbHNlIHsgcmV0dXJuIGxlZnQgaW5zdGFuY2VvZiByaWdodDsgfSB9XHJcblxyXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH1cclxuXHJcbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9XHJcblxyXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSBcIltvYmplY3QgQXJndW1lbnRzXVwiKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfVxyXG5cclxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gfVxyXG5cclxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cclxuXHJcbnZhciBTY3JhbWJsZXIgPSBmdW5jdGlvbiBTY3JhbWJsZXIoc2NyYW1ibGVBcmdzKSB7XHJcbiAgICAvLyBjYWxsIGFjdGlvbiBmblxyXG4gICAgdmFyIHNjcmFtYmxlRmlyZSA9IGZ1bmN0aW9uIHNjcmFtYmxlRmlyZShzY3JhbWJsZUFyZ3MpIHtcclxuICAgICAgLy8gcmVtZW1iZXIsIGhvaXN0ZWRcclxuICAgICAgLy8gZ2V0IGNob3NlbiBzY3JhbWJsZSBpdGVtc1xyXG4gICAgICB2YXIgc2NyYW1ibGUgPSBwYXNzZWRBc09iamVjdCA/IF90b0NvbnN1bWFibGVBcnJheShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNjcmFtYmxlQXJncy50YXJnZXQpKSA6IF90b0NvbnN1bWFibGVBcnJheShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNjcmFtYmxlQXJncykpOyAvLyBmb3IgZWFjaCBzY3JhbWJsZSBlbGVtZW50XHJcblxyXG4gICAgICBzY3JhbWJsZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCB3aGljaCkge1xyXG4gICAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JhbWJsZS1hY3RpdmUnKSAhPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JhbWJsZS1hY3RpdmUnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgdmFyIHRydXRoID0gZWxlbWVudC50ZXh0Q29udGVudC5zcGxpdCgnJyk7IC8vIGdldCBsZXR0ZXJzXHJcblxyXG4gICAgICAgICAgdmFyIHRydXRoSFRNTCA9IGVsZW1lbnQuaW5uZXJIVE1MOyAvLyBnZXQgaHRtbFxyXG5cclxuICAgICAgICAgIHZhciBzdGFydFRleHQgPSB0cnV0aDtcclxuICAgICAgICAgIHZhciBuZXdMZXR0ZXJzID0gZWxlbWVudC50ZXh0Q29udGVudC5zcGxpdCgnJyk7XHJcbiAgICAgICAgICB2YXIgcmV2ZXJ0ID0gW107IC8vIGluaXQgZW1wdHkga2lsbCBzd2l0Y2ggYXJyYXlcdFxyXG5cclxuICAgICAgICAgIHZhciBzcGVlZCA9IHNjcmFtYmxlQXJncy5zcGVlZCA/IHNjcmFtYmxlQXJncy5zcGVlZCA6IDEwMDtcclxuICAgICAgICAgIHZhciBIVE1McmVzZXQgPSBmYWxzZTsgLy8gaWYgdXNlciBkZWZpbmVzIGFuIGVuZGluZyB0ZXh0IHN0cmluZyB0aGVuIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIHRleHRcclxuXHJcbiAgICAgICAgICB2YXIgZGVmaW5lRW5kVGV4dCA9IGZ1bmN0aW9uIGRlZmluZUVuZFRleHQoZW5kKSB7XHJcbiAgICAgICAgICAgIHZhciBlbmRUZXh0ID0gZW5kIHx8IGVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIHRydXRoID0gZW5kVGV4dC5zcGxpdCgnJyk7XHJcbiAgICAgICAgICAgIG5ld0xldHRlcnMgPSBlbmRUZXh0LnNwbGl0KCcnKTtcclxuICAgICAgICAgICAgc3RhcnRUZXh0ID0gW107XHJcbiAgICAgICAgICAgIHRydXRoLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgaWYgKCcgXFx0XFxuXFxyXFx2Jy5pbmRleE9mKHRydXRoW2luZGV4XSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRUZXh0LnB1c2goJyAnKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRUZXh0LnB1c2gocmFuZG9tQ2hhcigpKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzdGFydFRleHQgPSBzdGFydFRleHQ7XHJcbiAgICAgICAgICB9OyAvLyBmaXJzdCBjaGVjayBwYXNzZWQgb3B0aW9uIGFuZCB0aGVuIGRhdGEtYXR0cmlidXRlIFxyXG5cclxuXHJcbiAgICAgICAgICBpZiAoc2NyYW1ibGVBcmdzLnRleHQgJiYgc2NyYW1ibGVBcmdzLnRleHQgIT09IFwiXCIgJiYgKHR5cGVvZiBzY3JhbWJsZUFyZ3MudGV4dCA9PT0gJ3N0cmluZycgfHwgX2luc3RhbmNlb2Yoc2NyYW1ibGVBcmdzLnRleHQsIFN0cmluZykpKSB7XHJcbiAgICAgICAgICAgIGRlZmluZUVuZFRleHQoc2NyYW1ibGVBcmdzLnRleHQpO1xyXG4gICAgICAgICAgICBIVE1McmVzZXQgPSB0cnVlO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JhbWJsZS10ZXh0JykgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NyYW1ibGUtdGV4dCcpICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGRlZmluZUVuZFRleHQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NyYW1ibGUtdGV4dCcpKTtcclxuICAgICAgICAgICAgSFRNTHJlc2V0ID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgdGlja2VyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBtYXAgb3ZlciBsZXR0ZXJzIGFuZCByZXBsYWNlIHdpdGggcmFuZG9tIG9yIHJldmVydCBiYWNrIHRvIHRydXRoXHJcbiAgICAgICAgICAgIHN0YXJ0VGV4dC5tYXAoZnVuY3Rpb24gKGxldHRlciwgaSkge1xyXG4gICAgICAgICAgICAgIC8vIGJyZWFrIGlmIGEgc3BhY2VcclxuICAgICAgICAgICAgICBpZiAoJyBcXHRcXG5cXHJcXHYnLmluZGV4T2YobGV0dGVyKSA+IC0xKSByZXR1cm47IC8vIHNldCBuZXcgcmFuZG9tIGxldHRlclxyXG5cclxuICAgICAgICAgICAgICBuZXdMZXR0ZXJzW2ldID0gcmFuZG9tQ2hhcigpOyAvLyBzZXQgcmFuZG9tIHRpbWVvdXQgdG8gbWFrZSBsZXR0ZXJzIHJlc2V0IGF0IGRpZmZlcmVudCB0aW1lc1xyXG5cclxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldmVydFtpXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfSwgcmFuZG9tVGltZSgpKTsgLy8gcmVzZXQgaW5kaXZpZHVhbCBsZXR0ZXIgaWYga2lsbCBzd2l0Y2hcclxuXHJcbiAgICAgICAgICAgICAgaWYgKHJldmVydFtpXSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgbmV3TGV0dGVyc1tpXSA9IHRydXRoW2ldO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgOyAvLyBzZXQgaHRtbFxyXG5cclxuICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gbmV3TGV0dGVycy5qb2luKCcnKTtcclxuICAgICAgICAgICAgfSk7IC8vIGtpbGwgaW50ZXJ2YWwgYWZ0ZXIgYWxsIGxldHRlciByZXR1cm5lZCB0byBub3JtYWwgdG8gc2F2ZSBzdGFja1xyXG5cclxuICAgICAgICAgICAgdmFyIGtpbGxDaGVjayA9IG5ld0xldHRlcnMubGVuZ3RoID09IHRydXRoLmxlbmd0aCAmJiBuZXdMZXR0ZXJzLmV2ZXJ5KGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IHRydXRoW2ldO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChraWxsQ2hlY2spIHtcclxuICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHRydXRoSFRNTDtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKEhUTUxyZXNldCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlubmVyQ29udGVudCA9IGVsZW1lbnQuY2hpbGRyZW5bMF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlubmVyQ29udGVudCAmJiBpbm5lckNvbnRlbnQgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgaW5uZXJDb250ZW50LnRleHRDb250ZW50ID0gbmV3TGV0dGVycy5qb2luKCcnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBuZXdMZXR0ZXJzLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aWNrZXIpOyAvLyBzdG9wIGxvb3BpbmdcclxuXHJcbiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2NyYW1ibGUtYWN0aXZlJywgJ2ZhbHNlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIDtcclxuICAgICAgICAgIH0sIHNwZWVkKTsgLy8gZW5kIHRpY2tlclxyXG4gICAgICAgIH0gLy8gZW5kIGNoZWNrIGZvciBhY3RpdmVcclxuXHJcbiAgICAgIH0pOyAvLyBlbmQgZm9yRWFjaFxyXG4gICAgfTtcclxuXHJcbiAgICAvKioqIGhlbHBlciBmdW5jdGlvbnMgKioqL1xyXG4gICAgLy8gdXRpbGl0eSBmbiB0byBnZXQgYSByYW5kb20gY2hhcmFjdGVyIFxyXG4gICAgdmFyIHJhbmRvbUNoYXIgPSBmdW5jdGlvbiByYW5kb21DaGFyKGxlbmd0aCkge1xyXG4gICAgICB2YXIgbCA9IGxlbmd0aCB8fCAxO1xyXG4gICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnJlcGxhY2UoL1teYS16XSsvZywgJycpLnN1YnN0cigwLCBsKTtcclxuICAgICAgaWYgKCcgXFx0XFxuXFxyXFx2Jy5pbmRleE9mKHIpIDwgMCkgcmV0dXJuIHI7XHJcbiAgICB9OyAvLyBvYmplY3QgdGVzdFxyXG5cclxuXHJcbiAgICB2YXIgaXNPYmplY3QgPSBmdW5jdGlvbiBpc09iamVjdChhKSB7XHJcbiAgICAgIHJldHVybiAhIWEgJiYgYS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xyXG4gICAgfTsgLy8gZGlkIHRoZSB1c2VyIHBhc3MgYW4gb2JqZWN0IGFzIGFuIGFyZ3VtZW50P1xyXG5cclxuXHJcbiAgICB2YXIgcGFzc2VkQXNPYmplY3QgPSBpc09iamVjdChzY3JhbWJsZUFyZ3MpIHx8IF90eXBlb2Yoc2NyYW1ibGVBcmdzKSA9PSAnb2JqZWN0JzsgLy8gc2V0IGZ1bmN0aW9uIGRlZmF1bHQgYXJndW1lbnRzIGlmIGl0IHdhcyBhbiBvYmplY3RcclxuXHJcbiAgICBpZiAocGFzc2VkQXNPYmplY3QpIHtcclxuICAgICAgc2NyYW1ibGVBcmdzLnRhcmdldCA9IHR5cGVvZiBzY3JhbWJsZUFyZ3MudGFyZ2V0ICE9PSAndW5kZWZpbmVkJyAmJiBwYXNzZWRBc09iamVjdCA/IHNjcmFtYmxlQXJncy50YXJnZXQgOiAnW2RhdGEtc2NyYW1ibGVyXSc7XHJcbiAgICAgIHNjcmFtYmxlQXJncy5yYW5kb20gPSB0eXBlb2Ygc2NyYW1ibGVBcmdzLnJhbmRvbSAhPT0gJ3VuZGVmaW5lZCcgJiYgcGFzc2VkQXNPYmplY3QgPyBzY3JhbWJsZUFyZ3MucmFuZG9tIDogWzEwMDAsIDMwMDBdO1xyXG4gICAgICBzY3JhbWJsZUFyZ3Muc3BlZWQgPSB0eXBlb2Ygc2NyYW1ibGVBcmdzLnNwZWVkICE9PSAndW5kZWZpbmVkJyAmJiBwYXNzZWRBc09iamVjdCA/IHNjcmFtYmxlQXJncy5zcGVlZCA6IDEwMDtcclxuICAgICAgc2NyYW1ibGVBcmdzLnRleHQgPSB0eXBlb2Ygc2NyYW1ibGVBcmdzLnRleHQgIT09ICd1bmRlZmluZWQnICYmIHBhc3NlZEFzT2JqZWN0ID8gc2NyYW1ibGVBcmdzLnRleHQgOiBmYWxzZTtcclxuICAgIH0gLy8gdXRpbGl0eSBmbiB0byBnZXQgYSByYW5kb20gZGVsYXkgdGltZSBcclxuXHJcblxyXG4gICAgdmFyIHJhbmRvbVRpbWUgPSBmdW5jdGlvbiByYW5kb21UaW1lKCkge1xyXG4gICAgICBpZiAocGFzc2VkQXNPYmplY3QpIHtcclxuICAgICAgICByZXR1cm4gc2NyYW1ibGVBcmdzLnJhbmRvbVswXSArIChNYXRoLnJhbmRvbSgpICogKDEgLSBzY3JhbWJsZUFyZ3MucmFuZG9tWzFdKSArIHNjcmFtYmxlQXJncy5yYW5kb21bMV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gMTAwMCArIChNYXRoLnJhbmRvbSgpICogKDEgLSAzMDAwKSArIDMwMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICBzY3JhbWJsZUZpcmUoc2NyYW1ibGVBcmdzKTtcclxuICAgIDsgLy8gZW5kIHNjcmFtYmxlRmlyZVxyXG5cclxufTsgLy8gZW5kIFNjcmFtYmxlXHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xyXG4gIG1vZHVsZS5leHBvcnRzID0gU2NyYW1ibGVyO1xyXG59Il19
